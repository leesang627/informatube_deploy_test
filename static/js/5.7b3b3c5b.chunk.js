(this.webpackJsonpinformatube=this.webpackJsonpinformatube||[]).push([[5],{1267:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(40),i=a(38),l=a(28),o=a(1264),u=a(407),s=a.n(u),m=a(76),f=a(62),d=Object(m.a)((function(e){return{playerWrapper:{position:"relative",height:"50vh"},ReactPlayer:{position:"absolute",top:0,left:0}}})),b=function(e){var t=e.url,a=e.handlePlayedSec,n=d(),i=Object(c.b)(),l=Object(c.c)((function(e){return e.player})).playing;return r.a.createElement("div",{className:n.playerWrapper},r.a.createElement(s.a,{className:n.reactPlayer,url:t,width:"100%",height:"100%",controls:!0,onProgress:function(e){a(parseInt(e.playedSeconds))},playing:l,onPlay:function(){i({type:f.b})},onPause:function(){i({type:f.a})}}))},p=a(13),E=a(7),v=a(145),h=a(1234),j=a(1232),g=a(1233),O=a(414),y=a.n(O),w=a(1269),C=a(1255),k={SecTohhmmss:function(e){if(e<0)return"0:00";var t=function(e){return e<10?"0"+e.toString():e.toString()};if(e<60)return"0:"+t(String(e));if(e<3600)return String(parseInt(e/60))+":"+t(e%60);var a=parseInt(e/3600);return String(a)+":"+t(parseInt(e%3600/60))+":"+t(e%60)}},N=k,S=a(32),x=a(34),R=Object(m.a)((function(e){return{root:{width:"100%",height:"80px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},formContainer:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center"},inputContainer:{width:"90%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},inputForm:{width:"100%"},br1:{height:10,width:10},br2:{height:5,width:5},buttonContainer:{width:"100%",height:"100%"}}})),T=function(e){var t=e.playedSec,a=(e.name,e.canvasRef),i=Object(c.b)(),o=R(),u=Object(c.c)((function(e){return e.view})).mode,s=Object(c.c)((function(e){return e.player})).playing,m=Object(c.c)((function(e){return e.list})).isLoaded,d=Object(c.c)((function(e){return e.user.me})),b=d&&d._id,O=Object(n.useState)(!0),k=Object(l.a)(O,2),T=k[0],I=k[1],F=Object(n.useState)(!0),P=Object(l.a)(F,2),U=P[0],D=P[1],z=Object(n.useState)({time:"",url:"",info:""}),L=Object(l.a)(z,2),_=L[0],A=L[1],G=function(){I(!1),A(Object(E.a)({},_,{time:t})),i({type:f.a})},q=function(){I(!0),i({type:f.b})};Object(n.useEffect)((function(){!T&&_.url.match(/[-a-zA-Z0-9@:%_.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_.~#?&//=]*)?/g)?D(!1):D(!0)}),[T,_.time,_.url,_.info]),Object(n.useEffect)((function(){s?q():G()}),[s]),Object(n.useEffect)((function(){console.log("hello"),m&&A((function(e){return Object(E.a)({},e,{url:"",info:""})}))}),[m]);var W=function(e){A(Object(E.a)({},_,Object(p.a)({},e.target.id,e.target.value)))};return r.a.createElement("div",{className:o.root},T?r.a.createElement(w.a,{title:"\uc2dc\uac04 \uc120\ud0dd",TransitionComponent:C.a,arrow:!0},r.a.createElement(v.a,{variant:"contained",color:"primary",onClick:G},N.SecTohhmmss(t),r.a.createElement("br",null),"\uc120\ud0dd")):r.a.createElement(w.a,{title:"\uc2dc\uac04 \uc120\ud0dd \ucde8\uc18c",TransitionComponent:C.a,arrow:!0},r.a.createElement(v.a,{variant:"contained",color:"secondary",onClick:q},N.SecTohhmmss(_.time),r.a.createElement("br",null),"\ucde8\uc18c")),r.a.createElement("div",{className:o.br1}),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a.current&&a.current.clear(),i(Object(x.d)(_)),i(Object(S.k)(_.url,b)),i({type:S.b})},className:o.formContainer,autoComplete:"off"},r.a.createElement("div",{className:o.inputContainer},r.a.createElement("div",{className:o.inputForm},r.a.createElement(j.a,{size:"sm"},r.a.createElement(j.a.Prepend,null,r.a.createElement(j.a.Text,null,"\ub313\uae00")),r.a.createElement(g.a,{value:_.info,id:"info",onChange:W,"aria-label":"info","aria-describedby":"inputInfo",placeholder:"\uad00\ub828 \uc815\ubcf4\ub97c \ub313\uae00\ub85c \ub2ec\uc544\uc8fc\uc138\uc694.",disabled:"sketch"===u}),r.a.createElement(j.a.Append,null,r.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){A(Object(E.a)({},_,{info:""}))},disabled:"sketch"===u},"\uc9c0\uc6b0\uae30"))),r.a.createElement("div",{className:o.br2}),r.a.createElement(j.a,{size:"sm"},r.a.createElement(j.a.Prepend,null,r.a.createElement(j.a.Text,null,"URL")),r.a.createElement(g.a,{value:_.url,id:"url",onChange:W,"aria-label":"url","aria-describedby":"inputURL",placeholder:"\ucd9c\ucc98 URL\uc744 \uc801\uc5b4\uc8fc\uc138\uc694.",disabled:"sketch"===u}),r.a.createElement(j.a.Append,null,r.a.createElement(h.a,{variant:"outline-secondary",onClick:function(){A(Object(E.a)({},_,{url:""}))},disabled:"sketch"===u},"\uc9c0\uc6b0\uae30"))))),r.a.createElement("div",{className:o.br1}),r.a.createElement(w.a,{title:"\uc2a4\ucf00\uce58 \ubaa8\ub4dc",TransitionComponent:C.a,arrow:!0},r.a.createElement(v.a,{color:"primary",type:"submit",variant:"contained",disabled:U},r.a.createElement(y.a,null)))))},I=a(644),F=a(1256),P=a(1261),U=a(1258),D=a(1257),z=a(1259),L=a(1270),_=a(81),A=a(1260),G={trunc:function(e,t){return e.length>t?e.substr(0,t-1)+"...":e}},q=G,W=Object(m.a)((function(e){return{inline:{display:"inline"}}})),B=function(e){var t=e.infostamp,a=e.viewRef,n=W(),i=Object(c.b)(),l=N.SecTohhmmss,o=q.trunc;return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{alignItems:"flex-start"},r.a.createElement(D.a,null,r.a.createElement(L.a,{alt:t.stamper.name},t.stamper.name.slice(0,2))),r.a.createElement(U.a,{primary:o(t.info,60),secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{component:"span",variant:"body1",className:n.inline,color:"textPrimary"},o(t.url,70)),r.a.createElement("br",null),r.a.createElement(_.a,{component:"span",variant:"body2",className:n.inline,color:"textPrimary"},l(t.time),"~",l(t.time+10)," ------- \uc720\uc6a9\ud568 ",t.likedUsers.length," / \uc4f8\ubaa8\uc5c6\uc74c ",t.dislikedUsers.length))}),r.a.createElement(z.a,null,r.a.createElement(A.a,{onClick:function(){i(Object(S.i)(t)),i({type:S.c}),i(Object(S.j)(t)),setTimeout((function(){a.current.scrollTop=t.scroll}),100)},edge:"end","aria-label":"view"},r.a.createElement(y.a,null)))),r.a.createElement(P.a,{variant:"inset",component:"li"}))},H=a(30),J=Object(m.a)((function(e){return{root:{width:"100%"}}})),V=function(e){var t=e.playedSec,a=e.viewRef,i=Object(c.b)(),l=Object(c.c)((function(e){return e.list})).infostamps,o=J();Object(n.useEffect)((function(){i(Object(H.e)())}),[i]);var u=l&&l.filter((function(e){return parseInt(e.time)-1<t&&t<parseInt(e.time)+10})).sort((function(e,t){return e.likedUsers.length-e.dislikedUsers.length-(t.likedUsers.length-t.dislikedUsers.length)}));return r.a.createElement("div",null,r.a.createElement(I.a,{className:o.root},u&&u.map((function(e){return r.a.createElement(B,{key:e.createdAt,infostamp:e,viewRef:a})}))))},Z=a(645),K=a(1262),M=Object(m.a)((function(e){return{image:{width:"100%",position:"absolute",top:0,left:0},canvas:{position:"absolute",top:0,left:0,width:"100%"},cover:{width:"100%",height:"100%",position:"absolute",top:0,left:0,zIndex:1,backgroundColor:"white"},progress:{position:"absolute",top:"40%",left:"40%",display:"flex",flexDirection:"column",alignItems:"center"}}})),Q=function(e){var t=e.src,a=e.canvasRef,i=M(),o=Object(c.c)((function(e){return e.view})).isChanging,u=Object(n.useRef)(),s=Object(n.useState)(200),m=Object(l.a)(s,2),f=m[0],d=m[1];return r.a.createElement(r.a.Fragment,null,o?r.a.createElement("div",{className:i.cover},r.a.createElement("div",{className:i.progress},r.a.createElement(K.a,null),r.a.createElement("div",null,r.a.createElement("br",null),"\uc2a4\ucf00\uce58 \uc900\ube44 \uc911"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{ref:u,src:t,className:i.image,alt:"View",onLoad:function(){d(u.current.height)}}),r.a.createElement(Z.SketchField,{className:i.canvas,ref:a,tool:Z.Tools.Pencil,lineColor:"rgba(255,0,0,0.7)",lineWidth:3,height:f})))},X=a(1263),Y=a(1229),$=a.n(Y),ee=a(626),te=a.n(ee),ae=Object(m.a)((function(e){return{buttonContainer:{width:300,height:50,position:"absolute",left:50,top:520},buttonGroup:{display:"flex",justifyContent:"center"}}})),ne=function(e){var t=e.canvasRef,a=e.uid,n=ae(),i=Object(c.c)((function(e){return e.infostamp})),l=i.isSaving,o=i.isSaved,u=Object(c.c)((function(e){return e.infostamp.formData})),s=u.url,m=u.info,f=u.time,d=Object(c.c)((function(e){return e.view})).scroll,b=Object(c.b)();return r.a.createElement("div",{className:n.buttonContainer},r.a.createElement("div",{className:n.buttonGroup},r.a.createElement(X.a,{color:"primary",variant:"contained","aria-label":"contained primary button group"},r.a.createElement(w.a,{title:"\uc2a4\ucf00\uce58 \ucde8\uc18c",TransitionComponent:C.a,arrow:!0},r.a.createElement(v.a,{onClick:function(){t.current.undo()}},r.a.createElement($.a,null))),r.a.createElement(v.a,{onClick:function(){var e=t.current.toDataURL();b(Object(x.f)({imgData:e,uid:a,url:s,info:m,time:f,scroll:d})),b(Object(H.e)())}},l?r.a.createElement(K.a,{size:20,color:"inherit"}):o?r.a.createElement(r.a.Fragment,null,"\uc644\ub8cc"):r.a.createElement(r.a.Fragment,null,"\ub313\uae00")),r.a.createElement(w.a,{title:"\ub2eb\uae30",TransitionComponent:C.a,arrow:!0},r.a.createElement(v.a,{onClick:function(){b({type:S.a})}},r.a.createElement(te.a,null))))))},re=a(1230),ce=a.n(re),ie=a(1231),le=a.n(ie),oe=a(15),ue=Object(m.a)((function(e){return{buttonContainer:{width:300,height:50,position:"absolute",left:50,top:520},buttonGroup:{display:"flex",justifyContent:"center"},closeButton:{position:"absolute",right:10,top:15}}})),se=function(e){var t=e.uid,a=ue(),i=Object(c.b)(),o=Object(c.c)((function(e){return e.view.selectedInfostamp})).url,u=Object(c.c)((function(e){return e.view})).selectedInfostamp,s=Object(n.useState)(!1),m=Object(l.a)(s,2),f=m[0],d=m[1],b=Object(n.useState)(!1),p=Object(l.a)(b,2),E=p[0],h=p[1];Object(n.useEffect)((function(){d(!1),h(!1)}),[o]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:a.closeButton},r.a.createElement(A.a,{onClick:function(){i({type:S.a})}},r.a.createElement(te.a,null))),r.a.createElement("div",{className:a.buttonContainer},r.a.createElement("div",{className:a.buttonGroup},r.a.createElement(X.a,{color:"primary",variant:"contained","aria-label":"contained primary button group"},r.a.createElement(w.a,{title:"\uc720\uc6a9\ud568",TransitionComponent:C.a,arrow:!0},r.a.createElement(v.a,{color:f?"secondary":"primary",onClick:function(){var e=u._id;f||E?f&&!E&&(d(!1),i(Object(oe.n)(t,e))):(d(!0),i(Object(oe.q)(t,e)))},disabled:E},r.a.createElement(ce.a,null))),r.a.createElement(v.a,{onClick:function(){console.log(o),window.open(o,"_blank").focus()}},"\ub9c1\ud06c"),r.a.createElement(w.a,{title:"\uc4f8\ubaa8\uc5c6\uc74c",TransitionComponent:C.a,arrow:!0},r.a.createElement(v.a,{color:E?"secondary":"primary",onClick:function(){var e=u._id;f||E?!f&&E&&(h(!1),i(Object(oe.m)(t,e))):(h(!0),i(Object(oe.p)(t,e)))},disabled:f},r.a.createElement(le.a,null)))))))},me=Object(m.a)((function(e){return{window:{width:"100%",height:512,overflow:"auto",position:"relative"},image:{width:"100%",position:"absolute",top:0,left:0},sketch:{border:"1px solid red"},viewer:{border:"1px solid blue"},infoContainer:{width:"100%",padding:5,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}}})),fe=function(e){var t=e.uid,a=e.canvasRef,i=e.viewRef,l=me(),o=Object(c.b)(),u=Object(n.useRef)(),s=q.trunc,m=Object(c.c)((function(e){return e.view})),f=m.mode,d=m.imageUrl,b=m.selectedInfostamp;return r.a.createElement(r.a.Fragment,null,"sketch"===f?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:l.sketch},r.a.createElement("div",{className:l.infoContainer},r.a.createElement(_.a,{variant:"subtitle1",color:"secondary"},"\uc2a4\ucf00\uce58 \ubaa8\ub4dc"),r.a.createElement(_.a,{variant:"subtitle2"},"\uc6d0\ud558\ub294 \uc704\uce58\ub85c \uc2a4\ud06c\ub864 \ud6c4, \ud45c\uc2dc\ub97c \ud574\uc8fc\uc138\uc694.")),r.a.createElement("div",{className:l.window,onScroll:function(){o(Object(S.g)(u.current.scrollTop))},ref:u},r.a.createElement(Q,{canvasRef:a,src:d,uid:t}))),r.a.createElement(ne,{canvasRef:a,uid:t})):"viewer"===f?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:l.viewer},r.a.createElement("div",{className:l.infoContainer},r.a.createElement(_.a,{variant:"subtitle1",color:"primary"},s(b.info,30)),r.a.createElement(_.a,{variant:"subtitle2"},s(b.url,40))),r.a.createElement("div",{className:l.window,ref:i},r.a.createElement("img",{src:d,className:l.image,alt:"View"}))),r.a.createElement(se,{uid:t})):r.a.createElement("div",null))},de=function(){var e=Object(c.c)((function(e){return e.user.me})),t=e&&e.name,a=e&&e._id,i=Object(n.useState)(0),u=Object(l.a)(i,2),s=u[0],m=u[1],f=Object(n.useRef)(),d=Object(n.useRef)();return r.a.createElement("div",{style:{flexGrow:1}},r.a.createElement(o.a,{container:!0,spacing:2},r.a.createElement(o.a,{item:!0,xs:8},r.a.createElement(b,{url:"https://www.youtube.com/watch?v=e1tqHqLFHIU",handlePlayedSec:function(e){m(e)}}),r.a.createElement(T,{playedSec:s,name:t,canvasRef:f}),r.a.createElement(V,{playedSec:s,viewRef:d})),r.a.createElement(o.a,{item:!0,xs:4,style:{position:"relative"}},r.a.createElement(fe,{uid:a,canvasRef:f,viewRef:d}))))};t.default=function(){var e=Object(c.c)((function(e){return e.user})).me;return r.a.createElement(r.a.Fragment,null,!e&&r.a.createElement(i.a,{to:"/login"}),r.a.createElement("div",null,r.a.createElement(de,null)))}},443:function(e,t){},696:function(e,t){},697:function(e,t){},781:function(e,t){},783:function(e,t){},794:function(e,t){},796:function(e,t){},825:function(e,t){},826:function(e,t){},887:function(e,t){}}]);
//# sourceMappingURL=5.7b3b3c5b.chunk.js.map